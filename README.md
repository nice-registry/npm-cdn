# npm-cdn

A webservice that dishes out files from npm packages.

npm-cdn downloads tarballs from the npm registry and stores them on disk. First-time requests for a package are slow because the entire package tarball has to be fetched, but subsequent requests for files in the same package should be pretty fast.

**Caveat npmtor**: This is a proof of concept app. It works, but it's experimental. It's running on a single Heroku dyno so it won't scale. To become a real thing it will need to sit behind a CDN.

See also [unpkg.com](https://unpkg.com/), a very similar project.

## Usage

To access a file inside a published npm package, use the following pattern:

```
https://npm-cdn.herokuapp.com/{packageName}@{packageVersion}/{filePath}
```

Examples:

- [/dat@6.8.6/img/dat-website.png](https://npm-cdn.herokuapp.com/dat@6.8.6/img/dat-website.png)
- [/express@4.10.4/package.json](https://npm-cdn.herokuapp.com/express@4.10.4/package.json)
- [/zeke.sikelianos.com@1.0.0/assets/images/hands.png](https://npm-cdn.herokuapp.com/zeke.sikelianos.com@1.0.0/assets/images/hands.png)

## Indexes

When a package is downloaded, index files are generated in HTML and JSON format.

- [/browserify@8.1.1](https://npm-cdn.herokuapp.com/browserify@8.1.1) renders an HTML
page with links to all the files in the package.
- [/browserify@8.1.1/?json](https://npm-cdn.herokuapp.com/browserify@8.1.1/?json) returns
a JSON array of all the files in the package. You can also set an `application/json`
Accept header in the request instead of using the `json` query param.

## Redirects

If you request a package without specifying a version, you'll be redirected to the
index for the latest version of the package:

- [/lodash](https://npm-cdn.herokuapp.com/lodash) redirects to [/lodash@2.4.1](https://npm-cdn.herokuapp.com/lodash@2.4.1)


## Tests

```sh
npm install
npm test
```

## Dependencies

- [findit](https://github.com/substack/node-findit): walk a directory tree recursively with events
- [handlebars](https://github.com/wycats/handlebars.js): Handlebars provides the power necessary to let you build semantic templates effectively with no frustration
- [request](https://github.com/request/request): Simplified HTTP request client.
- [restify](https://github.com/mcavage/node-restify): REST framework
- [superagent](https://github.com/visionmedia/superagent): elegant &amp; feature rich browser / node HTTP with a fluent API
- [tar-fs](git://github.com:mafintosh/tar-fs.git): filesystem bindings for tar-stream

## Dev Dependencies

- [mocha](https://github.com/mochajs/mocha): simple, flexible, fun test framework
- [nixt](https://github.com/vesln/nixt): Simple and powerful testing for command-line apps
- [nodemon](https://github.com/remy/nodemon): Simple monitor script for use during development of a node.js app.
- [rimraf](https://github.com/isaacs/rimraf): A deep deletion module for node (like `rm -rf`)
- [supertest](https://github.com/visionmedia/supertest): Super-agent driven library for testing HTTP servers


## License

ISC

_Generated by [package-json-to-readme](https://github.com/zeke/package-json-to-readme)_
